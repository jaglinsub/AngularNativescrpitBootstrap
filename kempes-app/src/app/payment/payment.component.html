<div class="container mt-5">
    <div class="row">
        <div class="col-xs-12 col-md-5 mr-auto ml-auto">
            <div class="cell example example3" id="example-3">
                <form id="profile-form" #profileForm="ngForm" [ngClass]="{ submitted: isProfileFormSubmitted}"
                    novalidate (ngSubmit)="onProfileSubmit(profileForm)">
                    <div class="fieldset mb-4">
                        <div class="col-md-12 field-group p-0">
                            <div class="fieldset filedCenter" id="WelcometoKempesLog">
                                <span>Welcome to Kempes</span>
                            </div>
                            <div class="fieldset filedCenter" id="Filloutthisform">
                                <span>Fill out this form and so we can get started!</span>
                            </div>
                        </div>
                    </div>
                    <div class="fieldsetb ml-n4">
                        <div class="col-md-12 field-group">
                            <div class="row">
                                <label class="lblAcc grplabels">Account Info</label>
                            </div>
                        </div>
                    </div>
                    <div *ngIf="parentUser.firstName && !editProfile">
                        <div class="fieldsetb m-0">
                            <div class="col-md-6 field-group">
                                <div class="fieldsetb">
                                    <label class="lblName">Name</label>
                                </div>
                                <div class="fieldsetb">
                                    <label class="lblProfileValue">{{ parentUser.firstName }} &nbsp;
                                        {{ parentUser.lastName }} </label>
                                </div>
                            </div>
                            <div class="col-md-6 field-group justify-content-end p-0">
                                <div class="fieldsetb justify-content-end m-0 p-0">
                                    <button class="btn btn-primary" id="btnEditProfile" style="margin: 0; padding: 0;"
                                        (click)="onEditProfile()">Edit</button>
                                </div>
                            </div>
                        </div>
                        <div class="fieldsetb">
                            <div class="col-md-12 p-0">
                                <div class="fieldsetb">
                                    <label for="email" class="lblEmail">Email</label>
                                </div>
                                <div class="fieldset">
                                    <label class="lblProfileValue">{{ parentUser.email }}</label>
                                </div>
                            </div>
                        </div>
                        <div class="fieldsetb mb-3">
                            <div class="col-md-12 p-0">
                                <div class="fieldsetb">
                                    <label for="example3-phone" class="lblPhone">Phone</label>
                                </div>
                                <div class="fieldsetb">
                                    <label class="lblProfileValue">{{ parentUser.phoneNumber | mask: '(000) 000-0000'}}</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div *ngIf="!parentUser.firstName || editProfile">
                        <div class="fieldsetb m-0">
                            <div class="col-md-6 field-group">
                                <div class="row">
                                    <label for="example3-name" class="lblName">First Name</label>
                                    <input id="example3-name" data-tid="elements_examples.form.name_label"
                                        class="field form-control" type="text" placeholder="First Name" required
                                        autocomplete="name" name="custName" [(ngModel)]="parentUser.firstName"
                                        maxlength="45" #nameValidator="ngModel">
                                    <div *ngIf="nameValidator.invalid && isProfileFormSubmitted"
                                        class="alert1 alert-danger1">

                                        <div *ngIf="nameValidator.errors.required">
                                            <i class="fas fa-exclamation-circle"></i>First Name is required.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 field-group">
                                <div class="row">
                                    <label for="example3-lname" class="lblLName">Last Name</label>
                                    <input id="example3-lname" data-tid="elements_examples.form.name_label"
                                        class="field form-control" type="text" placeholder="Last Name" required
                                        autocomplete="name" name="custLName" [(ngModel)]="parentUser.lastName"
                                        maxlength="45" #nameLValidator="ngModel">
                                    <div *ngIf="nameLValidator.invalid && isProfileFormSubmitted"
                                        class="alert1 alert-danger1">

                                        <div *ngIf="nameLValidator.errors.required">
                                            <i class="fas fa-exclamation-circle"></i>Last Name is required.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="fieldset">
                            <div class="col-md-12 p-0">
                                <div class="row">
                                    <label for="email" class="lblEmail">Email</label>
                                    <input id="email" name="email" data-tid="elements_examples.form.email_label"
                                        class="field form-control" type="email" placeholder="Email" required
                                        autocomplete="email" [(ngModel)]="parentUser.email" maxlength="45"
                                        #emailValidator="ngModel" [disabled]="true">

                                    <div *ngIf="emailValidator.invalid" class="alert1 alert-danger1">
                                        <div *ngIf="emailValidator.errors.required">
                                            <i class="fas fa-exclamation-circle"></i> Email is required.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="fieldset mb-3">
                            <div class="col-md-12 p-0">
                                <div class="row">
                                    <label for="example3-phone" class="lblPhone">Phone</label>
                                </div>
                                <div class="row">
                                    <input id="example3-phone" name="phone"
                                        data-tid="elements_examples.form.phone_label" class="field form-control"
                                        type="tel" placeholder="(000) 000-0000" mask="(000) 000-0000" required
                                        minlength="10" maxlength="14" #phoneValidator="ngModel" autocomplete="tel"
                                        [(ngModel)]="parentUser.phoneNumber">
                                    <div *ngIf="phoneValidator.invalid && isProfileFormSubmitted"
                                        class="alert1 alert-danger1">
                                        <div *ngIf="phoneValidator.errors.required">
                                            <i class="fas fa-exclamation-circle"></i>
                                            Please enter your phone number.
                                        </div>
                                        <div *ngIf="phoneValidator.errors.minlength">
                                            <i class="fas fa-exclamation-circle"></i>
                                            Please enter a valid phone number.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 submitA">
                            <div class="row" style="justify-content: center;">
                                <button type="submit" id="btnSubmit" [disabled]="!profileForm.form.valid"
                                    data-tid="elements_examples.form.pay_button">Submit</button>
                            </div>
                        </div>
                    </div>
                </form>
                <form id="payment-form" #paymentForm="ngForm" [ngClass]="{ submitted1: submitted}" novalidate>

                    <div class="fieldsetb ml-n4" *ngIf="users?.length > 0">
                        <div class="col-md-12 field-group">
                            <div class="row">
                                <label class="lblSelStu grplabels">Select Student</label>
                            </div>
                            <div *ngIf="submitted && !userSelected " class="alert1 alert-danger1">
                                <div>
                                    <i class="fas fa-exclamation-circle"></i>
                                    Please select a student.
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="fieldset mb-5">
                        <div class="col-md-12 p-0">
                            <div *ngFor="let user of users; let i = index; first as isFirst" class="row p-2">

                                <input type="radio" style="margin-left: 0px; margin-top: 10px; padding: 8px;"
                                    class="form-check-input student-check-input" id="student + i" name="student + i"
                                    (change)="onUserItemChange(user)" [checked]="users?.length == 1">
                                <label for="student + i" class="lblStudent p-2"
                                    style="margin-left: 20px; white-space:pre-wrap; width: 100%;">
                                    {{ user.firstName }} {{ user.lastName }} &nbsp;&nbsp; <span
                                        *ngIf="user.subscriptionPlanName">({{ user.subscriptionPlanName}})</span>
                                </label>
                            </div>

                        </div>
                    </div>
                    <div class="fieldsetb ml-n4" *ngIf="users?.length > 0">
                        <div class="col-md-12 field-group">
                            <div class="row">
                                <label class="lblPlan grplabels">Plan Selection</label>
                            </div>
                        </div>
                    </div>
                    <div class="fieldset" *ngIf="users?.length > 0">
                        <!-- <div class="col-md-12 p-0"> -->
                        <div class="card-columns">
                            <div class="card" style="border-style: none;"
                                *ngFor="let planList of paymentPlans; let i = index;">
                                <label>
                                    <input type="radio" name="plan + i" class="card-input-element d-none" id="plan + i"
                                        [checked]="planList.id==paymentDetails.planId"
                                        (change)="onPlanItemChange(planList)">
                                    <div class="card-inner card-body text-center p-2">
                                        <h5 class="card-title lblCardTitle"> {{ planList.nickname }} </h5>
                                        <span class="card-text lblCardText">${{ planList.amountDecimal }}</span><span
                                            class="lblCardMo">/{{ planList.interval }}</span>
                                        <p class="card-text lblCardTrail" *ngIf="planList.trialPeriodDays">
                                            {{ planList.trialPeriodDays}} days free trail</p>
                                        <p class="card-text lblCardTrail" *ngIf="!planList.trialPeriodDays">&nbsp;&nbsp;
                                        </p>
                                    </div>
                                </label>
                                <div *ngIf="planList.id==paymentDetails.planId && paymentDetails.nextBillDate">
                                    <div class="fieldsetb filedCenter">
                                        <label name="lblNBD" class="lblNxtBillDate ">Next Billing Date</label>
                                    </div>
                                    <div class="fieldsetb filedCenter">
                                        <label name="lblNBDD" class="lblNBDD"> {{ paymentDetails.nextBillDate }}</label>
                                    </div>
                                </div>
                            </div>
                            <!-- <div class="card" style="border-style: none;">
                                <label>
                                    <input type="radio" name="demo" class="card-input-element d-none" id="demo2">
                                    <div class="card-inner card-body text-center p-2">
                                        <h5 class="card-title lblCardTitle">Standard</h5>
                                        <span class="card-text lblCardText">$12</span><span class="lblCardMo">/mo</span>
                                        <p class="card-text lblCardTrail">2 month free trail</p>
                                    </div>
                                </label>
                                <div class="fieldsetb">
                                    <label name="lblNBD" class="lblNxtBillDate">Next Billing Date</label>
                                </div>
                                <div class="fieldsetb filedCenter">
                                    <label name="lblNBDD" class="lblNBDD">3/2</label>
                                </div>
                            </div> -->

                        </div>
                    </div>
                    <div class="fieldsetb">
                        <div class="col-md-12 field-group p-0">
                            <div class="row p-0">
                                <div class="col-md-6 field-group ml-n4 p-0">
                                    <label class=" lblCC grplabels">Credit Card Info</label>
                                </div>
                                <div class="col-md-6 field-group justify-content-end ml-4 p-0" *ngIf="isPaymentMethodExists">
                                    <div class="fieldsetb justify-content-end m-0 p-0">
                                        <button type="button" class="btn btn-primary" id="btnEditPayment"
                                            style="margin: 0; padding: 0;" (click)="onEditPayment()">Edit</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- </div> -->
                    <div [hidden]="isPaymentMethodExists && !editPayment">
                        <div class="fieldset m-0 mb-3">
                            <div class="col-md-12 field-group">
                                <div class="row">
                                    <label for="example3-card-number" class="lblCard">Card Number</label>
                                    <div id="example3-card-number" class="field empty" style="padding-bottom: 18px;">
                                    </div>
                                    <div class="errorcardNumber error" role="alert">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17"
                                            viewBox="0 0 17 17">
                                            <path class="base" fill="#000"
                                                d="M8.5,17 C3.80557963,17 0,13.1944204 0,8.5 C0,3.80557963 3.80557963,0 8.5,0 C13.1944204,0 17,3.80557963 17,8.5 C17,13.1944204 13.1944204,17 8.5,17 Z">
                                            </path>
                                            <path class="glyph" fill="#FFF"
                                                d="M8.5,7.29791847 L6.12604076,4.92395924 C5.79409512,4.59201359 5.25590488,4.59201359 4.92395924,4.92395924 C4.59201359,5.25590488 4.59201359,5.79409512 4.92395924,6.12604076 L7.29791847,8.5 L4.92395924,10.8739592 C4.59201359,11.2059049 4.59201359,11.7440951 4.92395924,12.0760408 C5.25590488,12.4079864 5.79409512,12.4079864 6.12604076,12.0760408 L8.5,9.70208153 L10.8739592,12.0760408 C11.2059049,12.4079864 11.7440951,12.4079864 12.0760408,12.0760408 C12.4079864,11.7440951 12.4079864,11.2059049 12.0760408,10.8739592 L9.70208153,8.5 L12.0760408,6.12604076 C12.4079864,5.79409512 12.4079864,5.25590488 12.0760408,4.92395924 C11.7440951,4.59201359 11.2059049,4.59201359 10.8739592,4.92395924 L8.5,7.29791847 L8.5,7.29791847 Z">
                                            </path>
                                        </svg>
                                        <span id="messagecardNumber" class="message"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="row">
                                    <label for="example3-card-expiry" class="lblCardExp">Card Exp</label>
                                    <div id="example3-card-expiry" class="field empty"></div>
                                    <div class="errorcardExpiry error" role="alert">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17"
                                            viewBox="0 0 17 17">
                                            <path class="base" fill="#000"
                                                d="M8.5,17 C3.80557963,17 0,13.1944204 0,8.5 C0,3.80557963 3.80557963,0 8.5,0 C13.1944204,0 17,3.80557963 17,8.5 C17,13.1944204 13.1944204,17 8.5,17 Z">
                                            </path>
                                            <path class="glyph" fill="#FFF"
                                                d="M8.5,7.29791847 L6.12604076,4.92395924 C5.79409512,4.59201359 5.25590488,4.59201359 4.92395924,4.92395924 C4.59201359,5.25590488 4.59201359,5.79409512 4.92395924,6.12604076 L7.29791847,8.5 L4.92395924,10.8739592 C4.59201359,11.2059049 4.59201359,11.7440951 4.92395924,12.0760408 C5.25590488,12.4079864 5.79409512,12.4079864 6.12604076,12.0760408 L8.5,9.70208153 L10.8739592,12.0760408 C11.2059049,12.4079864 11.7440951,12.4079864 12.0760408,12.0760408 C12.4079864,11.7440951 12.4079864,11.2059049 12.0760408,10.8739592 L9.70208153,8.5 L12.0760408,6.12604076 C12.4079864,5.79409512 12.4079864,5.25590488 12.0760408,4.92395924 C11.7440951,4.59201359 11.2059049,4.59201359 10.8739592,4.92395924 L8.5,7.29791847 L8.5,7.29791847 Z">
                                            </path>
                                        </svg>
                                        <span id="messagecardExpiry" class="message"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="row">
                                    <label for="example3-card-cvc" class="lblCardCVC">Security Code</label>
                                    <div id="example3-card-cvc" class="field empty"></div>
                                    <div class="errorcardCvc error" role="alert">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17"
                                            viewBox="0 0 17 17">
                                            <path class="base" fill="#000"
                                                d="M8.5,17 C3.80557963,17 0,13.1944204 0,8.5 C0,3.80557963 3.80557963,0 8.5,0 C13.1944204,0 17,3.80557963 17,8.5 C17,13.1944204 13.1944204,17 8.5,17 Z">
                                            </path>
                                            <path class="glyph" fill="#FFF"
                                                d="M8.5,7.29791847 L6.12604076,4.92395924 C5.79409512,4.59201359 5.25590488,4.59201359 4.92395924,4.92395924 C4.59201359,5.25590488 4.59201359,5.79409512 4.92395924,6.12604076 L7.29791847,8.5 L4.92395924,10.8739592 C4.59201359,11.2059049 4.59201359,11.7440951 4.92395924,12.0760408 C5.25590488,12.4079864 5.79409512,12.4079864 6.12604076,12.0760408 L8.5,9.70208153 L10.8739592,12.0760408 C11.2059049,12.4079864 11.7440951,12.4079864 12.0760408,12.0760408 C12.4079864,11.7440951 12.4079864,11.2059049 12.0760408,10.8739592 L9.70208153,8.5 L12.0760408,6.12604076 C12.4079864,5.79409512 12.4079864,5.25590488 12.0760408,4.92395924 C11.7440951,4.59201359 11.2059049,4.59201359 10.8739592,4.92395924 L8.5,7.29791847 L8.5,7.29791847 Z">
                                            </path>
                                        </svg>
                                        <span id="messagecardCvc" class="message"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="row">
                                    <label for="example3-zip" class="lblCardZip">Postal Code</label>
                                    <input id="example3-zip" name="zipcode"
                                        data-tid="elements_examples.form.postal_code_placeholder"
                                        class="field empty form-control" placeholder="94107"
                                        [(ngModel)]="paymentDetails.zipCode">
                                </div>
                            </div>
                        </div>

                        <!-- <div class="fieldsetb ml-n4">
                        <div class="col-md-12 field-group">
                            <div class="row">
                                <label class="lblBAdd grplabels">Billing Address</label>
                            </div>
                        </div>
                    </div>
                    <div class="fieldset">
                        <div class="col-md-12 p-0">
                            <div class="row">
                                <label for="inpAddr" class="lblAddress">Address</label>
                            </div>
                            <div class="row">
                                <input id="inpAddr" name="inpAddr"
                                    class="field form-control" type="text" placeholder="111 Example Strees" [(ngModel)]="paymentDetails.phone">
                            </div>
                        </div>
                    </div>
                    <div class="fieldset">
                        <div class="col-md-12 p-0">
                            <div class="row">
                                <label for="inpCity" class="lblCity">City</label>
                            </div>
                            <div class="row">
                                <input id="inpCity" name="inpCity"
                                    class="field form-control" type="text" placeholder="Los Angeles" [(ngModel)]="paymentDetails.phone">
                            </div>
                        </div>
                    </div>
                    <div class="fieldsetb m-0">
                        <div class="col-md-6 field-group">
                            <div class="row">
                                <label for="inpState" class="lblState">State</label>
                                <input id="inpState"
                                    class="field form-control" type="text" placeholder="First Name" required
                                    autocomplete="name" name="inpState" [(ngModel)]="paymentDetails.name" maxlength="45"
                                    #nameValidator="ngModel">
                                <div *ngIf="nameValidator.invalid" class="alert1 alert-danger1">

                                    <div *ngIf="nameValidator.errors.required">
                                        <i class="fas fa-exclamation-circle"></i>First Name is required.
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 field-group">
                            <div class="row">
                                <label for="example3-lname" class="lblLName">Last Name</label>
                                <input id="example3-lname" data-tid="elements_examples.form.name_label"
                                    class="field form-control" type="text" placeholder="Last Name" required
                                    autocomplete="name" name="custLName" [(ngModel)]="paymentDetails.name"
                                    maxlength="45" #nameLValidator="ngModel">
                                <div *ngIf="nameLValidator.invalid" class="alert1 alert-danger1">

                                    <div *ngIf="nameLValidator.errors.required">
                                        <i class="fas fa-exclamation-circle"></i>Last Name is required.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div> -->
                        <div class="col-md-12 submitA">
                            <div class="row" style="justify-content: center;">
                                <button type="submit" id="btnSubmit" [disabled]="!paymentForm.form.valid || !submitted"
                                    data-tid="elements_examples.form.pay_button">Submit</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Working------------------- -->
<!-- <div class="container">
    <div class="row">
        <div class="col-xs-12 col-md-8 mr-auto ml-auto">
<form action="/charge" method="post" id="payment-form">
    <div class="form-row">
      <label for="card-element">Credit or debit card</label>
      <div class="col-md-12" id="card-element"></div>
      <div id="card-errors" role="alert"></div>
    </div>
    <button>Add payment source</button>
  </form>
</div>
    </div>
</div> -->